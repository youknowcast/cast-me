<div id="datepicker-modal-container" data-controller="datepicker">
  <dialog id="datepicker-modal" class="modal modal-bottom sm:modal-middle" data-datepicker-target="modal" style="z-index: 99999;">
    <div class="modal-box p-0 bg-white text-gray-900 h-[70vh] max-h-[70vh] flex flex-col overflow-hidden rounded-t-[32px] border-t border-gray-200 shadow-[0_-8px_30px_rgb(0,0,0,0.12)]">

      <!-- ヘッダー -->
      <div class="px-6 py-5 flex justify-between items-center bg-white border-b border-gray-100 shrink-0">
        <div class="w-10"></div> <!-- Spacer for centering title -->
        <h3 class="text-[17px] font-bold tracking-tight text-black">Calendar</h3>
        <button class="w-10 h-10 flex items-center justify-center text-gray-300 hover:text-gray-500 transition-colors" type="button" data-action="datepicker#close">
          <i class="fas fa-times text-lg"></i>
        </button>
      </div>

      <!-- 曜日 (Sticky grid) -->
      <div class="grid grid-cols-7 text-center py-4 bg-white text-[10px] uppercase tracking-[0.1em] font-black text-gray-400 border-b border-gray-100 shrink-0">
        <% %w[Sun Mon Tue Wed Thu Fri Sat].each do |day| %>
          <div><%= day %></div>
        <% end %>
      </div>

      <!-- カレンダー本体 (無限スクロール領域) -->
      <div id="calendar-scroll-area" class="flex-1 overflow-y-auto smooth-scroll bg-white" data-datepicker-target="scrollArea" data-action="scroll->datepicker#onScroll">
        <!-- JavaScriptで動的に追加される -->
        <div class="flex flex-col items-center justify-center py-40 opacity-30" data-datepicker-target="loader">
          <span class="loading loading-spinner loading-lg text-blue-500 mb-4"></span>
          <p class="text-sm font-semibold text-gray-500">Updating Calendar...</p>
        </div>
      </div>

      <!-- フッター -->
      <div class="p-6 bg-white border-t border-gray-100 shrink-0">
        <button class="btn btn-primary w-full rounded-[20px] h-14 text-lg font-bold bg-blue-500 border-none text-white shadow-xl shadow-blue-500/30 active:scale-[0.98] transition-all" type="button" data-action="datepicker#confirm">
          Confirm
        </button>
      </div>
    </div>
  </dialog>
</div>
